<div class="citation-box" style="border:1px solid #ccc; padding:1em; margin-bottom:2em;">
  <h3>Citation</h3>

  <!-- Display citation text (authors_display = full details; authors = taxonomy strings) -->
  <p>
    {{ $authList := .Params.authors_display | default .Params.authors }}
    {{ with $authList }}
      {{ range $index, $author := . }}
        {{ if $index }}, {{ end }}
        {{ if reflect.IsMap $author }}{{ $author.name }}{{ else }}{{ $author }}{{ end }}
      {{ end }}
    {{ end }}. 
    "{{ .Title }}." 
    <em>{{ .Params.blog_name | default (site.Data.blog.blog_name | default "Genomics × AI Blog") }}</em>, 
    {{ .Date | dateFormat "2006" }}.
    {{ with .Params.doi }} <a href="https://doi.org/{{ . }}">DOI: {{ . }}</a>{{ end }}
  </p>

  <!-- Download links -->
  <div style="margin-top:0.5em;">
    <a href="{{ "bib/" | relURL }}{{ .Params.post_id }}.bib" download>Download BibTeX</a> |
    <a href="{{ "bib/" | relURL }}{{ .Params.post_id }}.ris" download>Download RIS</a>
  </div>

  <!-- Copy citation button -->
  {{ $authList := .Params.authors_display | default .Params.authors }}
  <button onclick="navigator.clipboard.writeText(`{{ .Title }}. {{ with $authList }}{{ range $i, $a := . }}{{ if $i }}, {{ end }}{{ if reflect.IsMap $a }}{{ $a.name }}{{ else }}{{ $a }}{{ end }}{{ end }}{{ end }}. Genomics × AI Blog. {{ .Date | dateFormat "2006" }}.`)">Copy Citation</button>
</div>

